
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Simulateur PTZ - MonPTZ</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 30px auto; padding: 20px; }
    input, select, button { width: 100%; padding: 10px; margin-top: 10px; }
    label { margin-top: 15px; display: block; }
    .result { margin-top: 20px; padding: 15px; background: #f0f8ff; border-radius: 5px; }
    footer { text-align: center; margin-top: 40px; font-size: 0.9em; color: #777; }
    .logo { text-align: center; margin-bottom: 30px; }
  </style>
</head>
<body>
  <div class="logo">
    <img src="logo.png" alt="MonPTZ Logo" width="200">
  </div>

  <h2>Simulateur PTZ - Estimez votre éligibilité</h2>

  <form id="ptzForm">
    <label>Code postal :
      <input type="text" id="zipcode" required>
    </label>
    <label>Nombre de personnes dans le foyer :
      <input type="number" id="foyer" min="1" required>
    </label>
    <label>Revenus fiscaux annuels (€) :
      <input type="number" id="revenus" required>
    </label>
    <label>Prix du bien souhaité (€) :
      <input type="number" id="prixBien" required>
    </label>
    <label>Type de bien :
      <select id="typeBien">
        <option value="Appartement neuf">Appartement neuf</option>
        <option value="Maison neuve">Maison neuve</option>
      </select>
    </label>
    <label>Prénom :
      <input type="text" id="prenom" required>
    </label>
    <label>Email :
      <input type="email" id="email" required>
    </label>
    <button type="submit">Vérifier mon éligibilité</button>
  </form>

  <div class="result" id="result" style="display: none;"></div>

  <form id="sendForm" action="https://formsubmit.co/lokidu38@hotmail.fr" method="POST" style="display: none;">
    <input type="hidden" name="Code Postal" id="sf_zipcode">
    <input type="hidden" name="Foyer" id="sf_foyer">
    <input type="hidden" name="Revenus" id="sf_revenus">
    <input type="hidden" name="Prix Bien" id="sf_prixBien">
    <input type="hidden" name="Type Bien" id="sf_typeBien">
    <input type="hidden" name="Prénom" id="sf_prenom">
    <input type="hidden" name="Email" id="sf_email">
    <input type="hidden" name="Eligibilité PTZ" id="sf_eligibilite">
    <input type="hidden" name="_subject" value="Nouveau lead MonPTZ !">
    <input type="hidden" name="_captcha" value="false">
    <button type="submit">Envoyer mes infos</button>
  </form>

  <footer>
    &copy; 2025 MonPTZ - Tous droits réservés
  </footer>

  <script>
    document.getElementById('ptzForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const revenus = parseInt(document.getElementById('revenus').value);
      const foyer = parseInt(document.getElementById('foyer').value);
      const prixBien = parseInt(document.getElementById('prixBien').value);
      const plafond = [0, 32000, 44800, 51500, 59700, 67800][foyer] || 70000;

      let eligible = revenus <= plafond;
      let montantPTZ = eligible ? Math.min(prixBien * 0.4, 138000) : 0;

      const result = document.getElementById('result');
      result.style.display = "block";

      if (eligible) {
        result.innerHTML = `<strong>Bonne nouvelle !</strong><br>
        Vous êtes éligible au PTZ.<br>
        Montant estimé : <strong>${montantPTZ.toLocaleString()} €</strong><br><br>
        Cliquez ci-dessous pour recevoir votre simulation.`;
      } else {
        result.innerHTML = `<strong>Désolé...</strong><br>
        Vous n'êtes pas éligible au PTZ selon les plafonds de revenus pour ${foyer} personne(s).<br><br>
        Vous pouvez tout de même envoyer vos infos pour être recontacté.`;
      }

      // Préparer le formulaire d'envoi
      document.getElementById('sf_zipcode').value = document.getElementById('zipcode').value;
      document.getElementById('sf_foyer').value = foyer;
      document.getElementById('sf_revenus').value = revenus;
      document.getElementById('sf_prixBien').value = prixBien;
      document.getElementById('sf_typeBien').value = document.getElementById('typeBien').value;
      document.getElementById('sf_prenom').value = document.getElementById('prenom').value;
      document.getElementById('sf_email').value = document.getElementById('email').value;
      document.getElementById('sf_eligibilite').value = eligible ? "Oui" : "Non";

      document.getElementById('sendForm').style.display = "block";
    });
  </script>
</body>
</html>
